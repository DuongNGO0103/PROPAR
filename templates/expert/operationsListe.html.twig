{% extends 'base.html.twig' %}

{% block title %}Dashboard
{% endblock %}

{% block navbarlists %}
	<li>
		<a href="{{ path('app_expert') }}">Tableau de bord</a>
	</li>
	<li>
		<a href="{{ path('app_expert_operations') }}">Ajouter une opération</a>
	</li>
	<li>
		<a href="{{ path('app_liste_operations') }}">Lister mes opérations</a>
	</li>
	<li>
		<a href="{{ path('liste_employe') }}">Liste des employés</a>
	</li>
	<li>
		<a href="{{ path('inscription') }}">Ajouter un employé</a>
	</li>
	<li>
		<a href="{{ path('liste_employe_modifier') }}">Modifier un employé</a>
	</li>
	<li>
		<a href="{{ path('app_prise_commande_expert') }}">Ajouter commande client</a>
	</li>
	<li>
		<a href="{{ path('app_chiffre_affaire') }}">Chiffre d'affaire</a>
	</li>

{% endblock %}

{% block main2 %}

	<h3>Lister mes opérations</h3>

	<input id='adresse'>
	<div class="container text-center">
		<div class="row">
			<div class="col">
				<p class="titreCommande">ID</p>
			</div>
			<div class="col">
				<p class="titreCommande">COMMANDE</p>
			</div>
			<div class="col">
				<p class="titreCommande">DATE</p>
			</div>
			<div class="col">
				<p class="titreCommande">CLIENT</p>
			</div>
			<div class="col">
				<p class="titreCommande">OPERATION</p>
			</div>
			<div class="col">
				<p class="titreCommande">STATUT</p>
			</div>
			<div class="col"></div>
			<hr>
		</div>
		<div id="resultat"></div>
		{% for commandes in commandeProfil %}
			<div class=" row" style="margin-top:3%">
				<div class=" col">
					{{commandes.id}}
				</div>
				<div class=" col">
					{{commandes.nomCommande}}
				</div>
				<div class=" col">
					{{ commandes.date|date("d/m/Y") }}
				</div>
				<div class=" col">
					{{commandes.client.nom}}
				</div>
				<div class=" col">
					{{commandes.operation.typeoperation}}
				</div>
				<div class=" col">
					{{commandes.statut}}
				</div>
				<div class=" col">
					{% if commandes.statut == "Terminer" %}
						<a href="{{path('afficherCommande',{'id':commandes.id})}}" style="color:#3D6A9E" class="boutton">PDF</a>
						{# <button type="submit" class="btn btn-primary">Modifier</button> #}
					{% endif %}
				</div>
			</div>
		{% endfor %}

		<script>
			$(document).ready(function () {
$("#adresse").keyup(function (e) {
e.preventDefault();

$.ajax({
url: "https://127.0.0.1:8000/call/ajax/operationsListe",
type: 'GET',
data: {
q: $("#adresse").val()

},
success: function (response) { // var json = $.parseJSON(response);

$.each(response, function (index, value) {

$("#resultat").append(value.id + " " + value.nomCommande + " " + value.client.nom + " " + value.operation.type_operation + " " + value.date);


});
},
error: function (response) {
console.log(error)
}
});


});
});
		</script>

	</div>
{% endblock %}
